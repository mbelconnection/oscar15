<?xml version="1.0"?>
<project default="codeCheck">
	<!--
		Note that this should be a self contained ant xml script with no reliance on
		build.xml. "ant -f codeCheck.xml" should run properly. 
	
		For now we custom just have our own custom checks because the code base is too
		messy. Once it's cleaned up a bit we should start using "pmd" and "checkstyle"
		to help enforce more.
	-->

	<path id="codeCheckClassPath">
		<fileset dir="../web/WEB-INF/lib">
			<include name="*.jar" />
		</fileset>
		<fileset dir="tasks/lib">
			<include name="*.jar" />
		</fileset>
		<pathelement location="tasks/classes" />
	</path>

	<target name="codeCheck">
		<delete>
			<fileset dir="tasks/classes" includes="**/*.class" />
		</delete>
		<javac srcdir="tasks/src" destdir="tasks/classes" debug="on">
			<classpath refid="codeCheckClassPath" />
		</javac>

		<taskdef name="GrepStuffAntTask" classname="GrepStuffAntTask">
			<classpath refid="codeCheckClassPath" />
		</taskdef>

		<GrepStuffAntTask srcDir="../web" dataFile="grep_check_web.data" />
		<GrepStuffAntTask srcDir="../database/mysql" dataFile="grep_check_sql.data" />
	</target>

</project>