<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
	"-//Hibernate/Hibernate Mapping DTD//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd" >
<hibernate-mapping package="org.oscarehr.PMmodule.model">
	<class name="Admission" table="admission">
		<id column="am_id" name="id" type="integer" unsaved-value="0">
			<generator class="sequence">
   			 <param name="sequence">seq_admission_id</param>
			</generator>
		</id>
		
		<property name="clientId" column="client_id" />
		<property name="programId" column="program_id" />
		<property name="providerNo" column="provider_no" />
		<property name="admissionDate" column="admission_date" />
		<property name="admissionStatus" column="admission_status" />
		<property name="intakeId" column="intake_id" />
		<property name="dischargeNotes" column="discharge_notes" />
		<property name="dischargeDate" column="discharge_date" />
		<property name="automaticDischarge" column="automatic_discharge" />
		<property name="dischargeReason" column="dischargereason" />
		<property name="transportationType" column="transportationtype" />

		<property name="communityProgramCode" column="communityprogramcode" />

		<property name="residentStatus" column="residentstatus" />
		<property name="primaryWorker" column="primaryworker" />
		<property name="lockerNo" column="lockerno" />
		<property name="noOfBags" column="noofbags" />
		<property name="nextKinName" column="nextkin_name" />
		<property name="nextKinRelationship" column="nextkin_relationship" />
		<property name="nextKinTelephone" column="nextkin_telephone" />
		<property name="nextKinNumber" column="nextkin_number" />
		<property name="nextKinStreet" column="nextkin_street" />
		<property name="nextKinCity" column="nextkin_city" />
		<property name="nextKinProvince" column="nextkin_province" />
		<property name="nextKinPostal" column="nextkin_postal" />
		<property name="nextKinCountry" column="nextkin_country" />
		<property name="ovPassStartDate" column="ovpass_startdate" />
		<property name="ovPassEndDate" column="ovpass_enddate" />
		<property name="issuedBy" column="issuedby" insert="false" update="false"></property>
		<property name="notSignReason" column="notsign_reason" />
		<property name="lastUpdateDate" column="lastupdate_date"></property>
		<property name="programName" type="string" lazy="true"
			formula="(select p.name from program p where p.program_id = program_id)" />
		<property name="programType" type="string" lazy="true"
			formula="(select p.type from program p where p.program_id = program_id)" />
			
	    <property name="providerName" lazy="true" formula="(select concat(p.last_name, concat(', ', p.first_name)) from Provider p where p.provider_no=provider_no)"></property> 

		<property name="admissionNotes" column="admission_notes" />
		<property name="intakeHeadId" type="integer" lazy="true"
			formula="(select if.intake_head_id from intake_family if where if.intake_id = intake_id)" />		
	</class>
</hibernate-mapping>

